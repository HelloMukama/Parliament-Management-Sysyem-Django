{% extends "base/layouts/base.html" %}

{% block title %} The count of all submissions vs categories and regions {% endblock %}

{% load static %}
{% load crispy_forms_tags %}
{% load widget_tweaks %}


<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css">

<!-- the line below will style our export buttons on our table. -->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.7.0/css/buttons.dataTables.min.css">
{% endblock stylesheets %}


{% block content %}

    <!-- [ Main Content ] start -->
    <div class="pcoded-main-container">
        <div class="pcoded-content">


            <!-- [ breadcrumb ] start -->
            <div class="page-header">
                <div class="page-block">
                    <div class="row align-items-center">
                        <div class="col-md-12">
                            <div class="page-header-title">
                                <h6 class="text-primary"><span class="fas fa-info-circle"></span> Switch between tabs below to view the different submission variations</h6>
                            </div>
                            <ul class="breadcrumb">
                                <li class="breadcrumb-item"><a href="{% url 'stats:dashboard' %}"><i class="feather icon-home"></i></a></li>
                                <li class="breadcrumb-item"><a href="{% url 'stats:submissions_cat_n_region_count' %}">Tables</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- [ breadcrumb ] end -->


            {% if request.user.profile.is_mp %}

                <div class="card">
                    <div class="card-body">
                        <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="category-tab" data-toggle="pill" href="#category" role="tab" aria-controls="category" aria-selected="true">Totals by Category</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="region-tab" data-toggle="pill" href="#region" role="tab" aria-controls="region" aria-selected="false">Totals by Region</a>
                            </li>
                        </ul>
                        <div class="tab-content" id="pills-tabContent">
                            <div class="tab-pane fade show active" id="category" role="tabpanel" aria-labelledby="category-tab">
                                {% include 'stats/tables_tab2.html' %}
                            </div>
                            <div class="tab-pane fade" id="region" role="tabpanel" aria-labelledby="region-tab">
                                {% include 'stats/tables_tab3.html' %}
                            </div>
                        </div>
                    </div>
                </div>
            {%endif%}


            {% if request.user.profile.is_thespeaker %}

                <div class="card">
                    <div class="card-body">
                        <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
                            <li class="nav-item">
                                <a class="nav-link active" id="general-tab" data-toggle="pill" href="#general" role="tab" aria-controls="general" aria-selected="true">General Totals</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="category-tab" data-toggle="pill" href="#category" role="tab" aria-controls="category" aria-selected="false">Totals by Category</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="region-tab" data-toggle="pill" href="#region" role="tab" aria-controls="region" aria-selected="false">Totals by Region</a>
                            </li>
                        </ul>
                        <div class="tab-content" id="pills-tabContent">
                            <div class="tab-pane fade show active" id="general" role="tabpanel" aria-labelledby="general-tab">
                                {% include 'stats/tables_tab1.html' %}
                            </div>
                            <div class="tab-pane fade" id="category" role="tabpanel" aria-labelledby="category-tab">
                                {% include 'stats/tables_tab2.html' %}
                            </div>
                            <div class="tab-pane fade" id="region" role="tabpanel" aria-labelledby="region-tab">
                                {% include 'stats/tables_tab3.html' %}
                            </div>
                        </div>
                    </div>
                </div>

            {% endif %}
        </div>
</div>


{% endblock content %}


<!-- Specific Page JS goes HERE  -->
{% block javascripts %}


<!-- the lines below create the tables. -->
<script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>

<!-- the lines below create the exporting features -->
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.7.0/js/dataTables.buttons.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.html5.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.print.min.js"></script>


<script>
    $(document).ready(function() {
        $('#myDataTableSpeakerGenTable').DataTable( {
            ordering: false,
            paging: false,
            ordering: false,
            "bInfo" : false,
            bFilter: false,

            dom: 'Bfrtip',
            buttons: [
                // 'copy', 'csv', 'excel', 'pdf', 'print'
                // 'pdf', 'print'
                'print'
            ]

        });
    } );

    $('#myTab a').on('click', function (e) {
        e.preventDefault()
        $(this).tab('show')
    })

</script>

{% endblock javascripts %}
